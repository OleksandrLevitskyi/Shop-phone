{"ast":null,"code":"const initState = {\n  items: {},\n  totalPrice: 0,\n  totalItems: 0\n};\n\nfunction basket(state = initState, action) {\n  switch (action.type) {\n    case \"ADD_PRODUCT_BASKET\":\n      {\n        const currentProductItems = !state.items[action.payload.id] ? [action.payload] : [...state.items[action.payload.id], action.payload];\n        const newObj = { ...state.items,\n          [action.payload.id]: {\n            items: currentProductItems,\n            totalCost: currentProductItems.reduce((sum, obj) => obj.cost + sum, 0)\n          }\n        };\n        const arrProduct = [].concat.apply([], Object.values(newObj));\n        const totalPrice = arrProduct.reduce((sum, obj) => obj.cost + sum, 0);\n        return { ...state,\n          items: newObj,\n          totalItems: arrProduct.length,\n          totalPrice\n        };\n      }\n\n    default:\n      return state;\n  }\n}\n\nexport default basket;","map":{"version":3,"sources":["/Users/sashalevitskiy/Desktop/MyProjects/technical_test/src/redux/reducers/basket.js"],"names":["initState","items","totalPrice","totalItems","basket","state","action","type","currentProductItems","payload","id","newObj","totalCost","reduce","sum","obj","cost","arrProduct","concat","apply","Object","values","length"],"mappings":"AAAA,MAAMA,SAAS,GAAG;AAChBC,EAAAA,KAAK,EAAE,EADS;AAEhBC,EAAAA,UAAU,EAAE,CAFI;AAGhBC,EAAAA,UAAU,EAAE;AAHI,CAAlB;;AAMA,SAASC,MAAT,CAAgBC,KAAK,GAAGL,SAAxB,EAAmCM,MAAnC,EAA2C;AACzC,UAAQA,MAAM,CAACC,IAAf;AACE,SAAK,oBAAL;AAA2B;AACvB,cAAMC,mBAAmB,GAAG,CAACH,KAAK,CAACJ,KAAN,CAAYK,MAAM,CAACG,OAAP,CAAeC,EAA3B,CAAD,GAC1B,CAACJ,MAAM,CAACG,OAAR,CAD0B,GAE1B,CAAC,GAAGJ,KAAK,CAACJ,KAAN,CAAYK,MAAM,CAACG,OAAP,CAAeC,EAA3B,CAAJ,EAAoCJ,MAAM,CAACG,OAA3C,CAFF;AAIF,cAAME,MAAM,GAAG,EACb,GAAGN,KAAK,CAACJ,KADI;AAEb,WAACK,MAAM,CAACG,OAAP,CAAeC,EAAhB,GAAqB;AACjBT,YAAAA,KAAK,EAAEO,mBADU;AAEjBI,YAAAA,SAAS,EAAEJ,mBAAmB,CAACK,MAApB,CAA2B,CAACC,GAAD,EAAMC,GAAN,KAAcA,GAAG,CAACC,IAAJ,GAAWF,GAApD,EAAyD,CAAzD;AAFM;AAFR,SAAf;AAOA,cAAMG,UAAU,GAAG,GAAGC,MAAH,CAAUC,KAAV,CAAgB,EAAhB,EAAoBC,MAAM,CAACC,MAAP,CAAcV,MAAd,CAApB,CAAnB;AACA,cAAMT,UAAU,GAAGe,UAAU,CAACJ,MAAX,CAAkB,CAACC,GAAD,EAAMC,GAAN,KAAcA,GAAG,CAACC,IAAJ,GAAWF,GAA3C,EAAgD,CAAhD,CAAnB;AACA,eAAO,EACL,GAAGT,KADE;AAELJ,UAAAA,KAAK,EAAEU,MAFF;AAGLR,UAAAA,UAAU,EAAEc,UAAU,CAACK,MAHlB;AAILpB,UAAAA;AAJK,SAAP;AAMD;;AACD;AACE,aAAOG,KAAP;AAvBJ;AAyBD;;AAED,eAAeD,MAAf","sourcesContent":["const initState = {\n  items: {},\n  totalPrice: 0,\n  totalItems: 0,\n};\n\nfunction basket(state = initState, action) {\n  switch (action.type) {\n    case \"ADD_PRODUCT_BASKET\": {\n        const currentProductItems = !state.items[action.payload.id]\n        ? [action.payload]\n        : [...state.items[action.payload.id], action.payload];\n\n      const newObj = {\n        ...state.items,\n        [action.payload.id]: {\n            items: currentProductItems,\n            totalCost: currentProductItems.reduce((sum, obj) => obj.cost + sum, 0),\n        },\n      };\n      const arrProduct = [].concat.apply([], Object.values(newObj));\n      const totalPrice = arrProduct.reduce((sum, obj) => obj.cost + sum, 0);\n      return {\n        ...state,\n        items: newObj,\n        totalItems: arrProduct.length,\n        totalPrice,\n      };\n    }\n    default:\n      return state;\n  }\n}\n\nexport default basket;\n"]},"metadata":{},"sourceType":"module"}